name: Deployment to Digital Ocean 

on:
  push:
      branches: ["terra"]

jobs: 
  deploy: 
    name: Deployment 
    runs on: Ubuntu latest
    
    steps: 
      - name: Checkout repository 
        uses: actions/checkout@v3 

      - name: Set up terraform 
        uses: hashicorp/setup-terraform@v1 
        with: 
          terraform_version: 1.0.0 
      
      - name: Terraform init 
        run: terraform init 

      - name: Terraform plan
        run: terraform plan 

      - name: Terraform apply
        run: terraform apply -auto-approve 
        env: 
          TF_VAR_do_token: ${{ secrets.VIKTORIA_DO_TOKEN }}

    